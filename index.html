<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoneToken Mining Hub</title>
    <link rel="icon" type="image/png" href="images/none.png">
    <!-- ÂºïÂÖ• Font Awesome ÂõæÊ†áÂ∫ì -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: #2C2F54 url('images/background.png') no-repeat center center fixed;
            background-size: cover; /* ËÉåÊôØÂõæÊãâ‰º∏Â°´ÂÖÖ */
            filter: blur(5px); /* Ê®°Á≥äÊïàÊûú */
            color: #fff;
            line-height: 1.4;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            position: relative;
        }
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(44, 47, 84, 0.6); /* ÂçäÈÄèÊòéÈÅÆÁΩ©ÔºåÂ¢ûÂº∫ÂâçÊôØÂØπÊØî */
            z-index: 1;
        }
        .header, .container, footer, .modal {
            position: relative;
            z-index: 2; /* Á°Æ‰øùÂâçÊôØÂÜÖÂÆπÂú®ËÉåÊôØÂõæ‰πã‰∏ä */
        }
        .header {
            background: rgba(30, 42, 68, 0.8); /* ÂçäÈÄèÊòéËÉåÊôØ */
            padding: 10px 0;
            text-align: center;
            width: 100%;
        }
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            background: rgba(30, 33, 61, 0.8);
            height: 40px;
        }
        .header-top .balance {
            font-size: 1.1em;
            color: #F4A261;
        }
        .header-top .actions {
            display: flex;
            gap: 10px;
        }
        .language-switcher, .action-btn {
            background: #34495E;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.8em;
            cursor: pointer;
        }
        .action-btn i {
            font-size: 1em;
        }
        .header-content {
            padding: 20px 0;
        }
        .header-content h1 {
            font-size: 1.5em;
            color: #F4A261;
            text-transform: uppercase;
            margin-bottom: 5px;
        }
        .header-content h2 {
            font-size: 0.9em;
            color: #A8B5D4;
            margin-bottom: 10px;
        }
        .miner-gif {
            width: 80px;
            height: 80px;
            background: url('images/Miner.png') no-repeat center;
            background-size: contain;
            margin: 0 auto 10px;
        }
        .miner-prompt {
            font-size: 0.8em;
            color: #F4A261;
            text-align: center;
            margin-bottom: 10px;
            animation: fade 3s infinite;
        }
        @keyframes fade {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }
        .container {
            width: 100%;
            max-width: 400px;
            padding: 0 10px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .section {
            background: rgba(44, 62, 80, 0.9); /* ÂçäÈÄèÊòéÂç°ÁâáËÉåÊôØ */
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        .section-title {
            font-size: 1.1em;
            color: #F4A261;
            margin-bottom: 10px;
        }
        .button-group {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }
        button {
            background: #F4A261;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s;
        }
        button:hover {
            background: #E07A5F;
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 10px 0;
        }
        input {
            padding: 8px;
            border: none;
            border-radius: 10px;
            background: #34495E;
            color: #fff;
            font-size: 0.9em;
            text-align: center;
        }
        input:focus {
            outline: none;
            box-shadow: 0 0 3px #F4A261;
        }
        .percentage-buttons {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
        }
        .percentage-btn {
            background: #F4A261;
            color: #fff;
            border: none;
            padding: 6px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            cursor: pointer;
            transition: background 0.3s;
        }
        .percentage-btn:hover {
            background: #E07A5F;
        }
        .info-panel {
            background: #34495E;
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            font-size: 0.8em;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: #2C3E50;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            color: #fff;
            max-width: 300px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        .modal-content p {
            margin-bottom: 15px;
            font-size: 1em;
        }
        .modal-content button {
            background: #F4A261;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
        }
        footer {
            background: rgba(30, 42, 68, 0.8);
            text-align: center;
            padding: 10px;
            width: 100%;
            color: #A8B5D4;
            font-size: 0.8em;
        }
        @media (max-width: 480px) {
            .header-content h1 { font-size: 1.3em; }
            .miner-gif { width: 60px; height: 60px; }
            button { padding: 6px 12px; font-size: 0.8em; }
            input { font-size: 0.8em; }
            .miner-prompt { font-size: 0.7em; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-top">
            <span id="noneBalance">0 NONE</span>
            <div class="actions">
                <button class="action-btn" onclick="window.open('https://twitter.com', '_blank')"><i class="fab fa-twitter"></i></button>
                <button class="action-btn" onclick="window.open('https://telegram.org', '_blank')"><i class="fab fa-telegram-plane"></i></button>
                <select class="language-switcher" id="languageSwitcher">
                    <option value="en">EN</option>
                    <option value="zh">ZH</option>
                    <option value="ja">JA</option>
                </select>
            </div>
        </div>
        <div class="header-content">
            <h1 id="title">NoneToken Mining Hub</h1>
            <h2 id="subtitle">February 20, 2025</h2>
            <div class="miner-gif"></div>
            <div class="miner-prompt" id="minerPrompt"></div>
        </div>
    </div>
    <div class="container">
        <div class="section">
            <div class="section-title" id="connectTitle">Connect Wallet</div>
            <div class="button-group">
                <button id="connectButton">Connect</button>
            </div>
            <div id="walletStatus" class="info-panel">Wallet: Not Connected</div>
        </div>
        <div class="section">
            <div class="section-title" id="joinTitle">Join Network</div>
            <div class="button-group">
                <button id="joinWithReferrerButton">Join (10 BONE)</button>
            </div>
            <div class="input-group">
                <input type="text" id="referrerInput" placeholder="Referrer Address">
            </div>
            <div id="joinInfo" class="info-panel"></div>
        </div>
        <div class="section">
            <div class="section-title" id="nodeTitle">Become a Node</div>
            <div class="button-group">
                <button id="becomeNodeButton">Node (1000 BONE)</button>
            </div>
            <div id="nodeInfo" class="info-panel"></div>
        </div>
        <div class="section">
            <div class="section-title" id="stakeTitle">Stake NONE</div>
            <div class="button-group">
                <button id="stakeButton">Stake</button>
                <button id="withdrawStakeButton">Withdraw</button>
            </div>
            <div class="input-group">
                <input type="text" id="nodeIdInput" placeholder="Node ID (1-2100)">
                <input type="text" id="stakeAmountInput" placeholder="Amount (Min 10000 NONE)">
            </div>
            <div class="percentage-buttons">
                <button class="percentage-btn" onclick="setStakePercentage(25)">25%</button>
                <button class="percentage-btn" onclick="setStakePercentage(50)">50%</button>
                <button class="percentage-btn" onclick="setStakePercentage(75)">75%</button>
                <button class="percentage-btn" onclick="setStakePercentage(100)">100%</button>
            </div>
            <div id="stakeInfo" class="info-panel"></div>
        </div>
    </div>
    <footer id="footer">Powered by Shibarium ¬© 2025</footer>

    <div id="modal" class="modal">
        <div class="modal-content">
            <p id="modalMessage"></p>
            <button onclick="closeModal()">OK</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.7.0/dist/web3.min.js"></script>
    <script>
        let web3, accounts, contract;
        const contractAddress = "0x64E19b6a167878d2483d166212A3c2c68b1eB842";
        const contractABI = /* [Your ABI here, same as original] */;
        const shibariumMainnet = {
            chainId: 109,
            chainName: 'Shibarium',
            nativeCurrency: { name: 'BONE', symbol: 'BONE', decimals: 18 },
            rpcUrls: ['https://www.shibrpc.com'],
            blockExplorerUrls: ['https://shibariumscan.io'],
        };

        const translations = {
            en: {
                title: "NoneToken Mining Hub",
                subtitle: "February 20, 2025",
                connectTitle: "Connect Wallet",
                walletStatus: "Wallet: Not Connected",
                joinTitle: "Join Network",
                joinButton: "Join (10 BONE)",
                referrerPlaceholder: "Referrer Address",
                nodeTitle: "Become a Node",
                nodeButton: "Node (1000 BONE)",
                stakeTitle: "Stake NONE",
                stakeButton: "Stake",
                withdrawButton: "Withdraw",
                nodeIdPlaceholder: "Node ID (1-2100)",
                amountPlaceholder: "Amount (Min 10000 NONE)",
                footer: "Powered by Shibarium ¬© 2025",
                connectPrompt: "Connecting to your wallet... ‚õèÔ∏è",
                connectError: "Connection failed: ",
                joinPrompt: "Joining network with 10 BONE... üíé",
                joinError: "Join failed: ",
                joinSuccess: "Joined successfully! Start mining! üöÄ",
                nodePrompt: "Upgrading to node with 1000 BONE... ‚öôÔ∏è",
                nodeError: "Node upgrade failed: ",
                nodeSuccess: "Upgraded to node! You're a mining boss! üéâ",
                stakePrompt: "Staking {amount} NONE to Node {nodeId}... ‚õèÔ∏è",
                stakeError: "Staking failed: ",
                stakeSuccess: "Staked {amount} NONE to Node {nodeId}! üí∞",
                withdrawPrompt: "Withdrawing your stake... üí∏",
                withdrawError: "Withdrawal failed: ",
                withdrawSuccess: "Stake withdrawn with rewards! üéä",
                connectFirst: "Please connect your wallet first! üîß",
                nodeIdDisplay: "Your Node ID: ",
                referralCount: "Referrals: ",
                prompts: [
                    "‚õèÔ∏è Miner, ready your pickaxe! Let's dig some NONE!",
                    "üíé Found any NONE yet? Keep mining, champ!",
                    "‚ö° Power up your rig! NONE awaits you!",
                    "üöÄ Blast off to the NONE mines! Go go go!",
                    "üî• Hot streak! Dig deeper for more NONE!",
                    "üí∞ Jackpot time! Stake more to win big!",
                    "‚õèÔ∏è Swing that pickaxe! NONE is calling!",
                    "üåü Shine bright, miner! NONE is your gem!",
                    "‚öôÔ∏è Gear up! The NONE mines are open!",
                    "üéâ Party in the mines! Dig for NONE now!"
                ]
            },
            zh: {
                title: "NoneToken ÊåñÁüø‰∏≠ÂøÉ",
                subtitle: "2025Âπ¥2Êúà20Êó•",
                connectTitle: "ËøûÊé•Èí±ÂåÖ",
                walletStatus: "Èí±ÂåÖ: Êú™ËøûÊé•",
                joinTitle: "Âä†ÂÖ•ÁΩëÁªú",
                joinButton: "Âä†ÂÖ• (10 BONE)",
                referrerPlaceholder: "Êé®Ëçê‰∫∫Âú∞ÂùÄ",
                nodeTitle: "Êàê‰∏∫ËäÇÁÇπ",
                nodeButton: "ËäÇÁÇπ (1000 BONE)",
                stakeTitle: "Ë¥®Êäº NONE",
                stakeButton: "Ë¥®Êäº",
                withdrawButton: "Êí§Âõû",
                nodeIdPlaceholder: "ËäÇÁÇπ ID (1-2100)",
                amountPlaceholder: "Êï∞Èáè (ÊúÄÂ∞è 10000 NONE)",
                footer: "Áî± Shibarium È©±Âä® ¬© 2025",
                connectPrompt: "ËøûÊé•Èí±ÂåÖ‰∏≠... ‚õèÔ∏è",
                connectError: "ËøûÊé•Â§±Ë¥•: ",
                joinPrompt: "Áî®10 BONEÂä†ÂÖ•ÁΩëÁªú... üíé",
                joinError: "Âä†ÂÖ•Â§±Ë¥•: ",
                joinSuccess: "Âä†ÂÖ•ÊàêÂäüÔºÅÂºÄÂßãÊåñÁüøÔºÅüöÄ",
                nodePrompt: "Áî®1000 BONEÂçáÁ∫ß‰∏∫ËäÇÁÇπ... ‚öôÔ∏è",
                nodeError: "ËäÇÁÇπÂçáÁ∫ßÂ§±Ë¥•: ",
                nodeSuccess: "ÂçáÁ∫ß‰∏∫ËäÇÁÇπÔºÅ‰Ω†ÊòØÊåñÁüøÂ§ß‰Ω¨ÔºÅüéâ",
                stakePrompt: "Â∞Ü {amount} NONE Ë¥®ÊäºÂà∞ËäÇÁÇπ {nodeId}... ‚õèÔ∏è",
                stakeError: "Ë¥®ÊäºÂ§±Ë¥•: ",
                stakeSuccess: "Â∑≤Â∞Ü {amount} NONE Ë¥®ÊäºÂà∞ËäÇÁÇπ {nodeId}ÔºÅüí∞",
                withdrawPrompt: "Êí§ÂõûË¥®Êäº‰∏≠... üí∏",
                withdrawError: "Êí§ÂõûÂ§±Ë¥•: ",
                withdrawSuccess: "Ë¥®ÊäºÂ∑≤Êí§ÂõûÔºåÂ∏¶Â•ñÂä±ÔºÅüéä",
                connectFirst: "ËØ∑ÂÖàËøûÊé•Èí±ÂåÖÔºÅüîß",
                nodeIdDisplay: "‰Ω†ÁöÑËäÇÁÇπ ID: ",
                referralCount: "ÈÇÄËØ∑‰∫∫Êï∞: ",
                prompts: [
                    "‚õèÔ∏è ÁüøÂ∑•ÔºåÂáÜÂ§áÂ•Ω‰Ω†ÁöÑÈïêÔºÅÂºÄÊåñ NONE ÂêßÔºÅ",
                    "üíé ÊåñÂà∞ NONE ‰∫ÜÂêóÔºüÁªßÁª≠Âä™ÂäõÔºåÂÜ†ÂÜõÔºÅ",
                    "‚ö° Áªô‰Ω†ÁöÑÁüøÊú∫Âä†ÁîµÔºÅNONE Âú®Á≠â‰Ω†ÔºÅ",
                    "üöÄ ÂÜ≤Âêë NONE ÁüøÂú∫ÔºÅÂø´Âø´Âø´ÔºÅ",
                    "üî• ÁÉ≠ÁÅ´ÊúùÂ§©ÔºÅÊåñÊ∑±ÁÇπÊãøÊõ¥Â§ö NONEÔºÅ",
                    "üí∞ Â§ßÂ•ñÊó∂ÂàªÔºÅÂ§öË¥®ÊäºËµ¢Â§ßÂ•ñÔºÅ",
                    "‚õèÔ∏è Êå•Âä®‰Ω†ÁöÑÈïêÔºÅNONE Âú®Âè¨Âî§ÔºÅ",
                    "üåü Èó™ËÄÄÂêßÔºåÁüøÂ∑•ÔºÅNONE ÊòØ‰Ω†ÁöÑÂÆùÁü≥ÔºÅ",
                    "‚öôÔ∏è Ë£ÖÂ§áÂ•ΩÔºÅNONE ÁüøÂú∫Â∑≤ÂºÄÊîæÔºÅ",
                    "üéâ ÁüøÂú∫Ê¥æÂØπÔºÅÁé∞Âú®Â∞±Êåñ NONE ÂêßÔºÅ"
                ]
            },
            ja: {
                title: "NoneToken „Éû„Ç§„Éã„É≥„Ç∞„Éè„Éñ",
                subtitle: "2025Âπ¥2Êúà20Êó•",
                connectTitle: "„Ç¶„Ç©„É¨„ÉÉ„Éà„ÇíÊé•Á∂ö",
                walletStatus: "„Ç¶„Ç©„É¨„ÉÉ„Éà: Êú™Êé•Á∂ö",
                joinTitle: "„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´ÂèÇÂä†",
                joinButton: "ÂèÇÂä† (10 BONE)",
                referrerPlaceholder: "Á¥π‰ªãËÄÖ„Ç¢„Éâ„É¨„Çπ",
                nodeTitle: "„Éé„Éº„Éâ„Å´„Å™„Çã",
                nodeButton: "„Éé„Éº„Éâ (1000 BONE)",
                stakeTitle: "NONE„Çí„Çπ„ÉÜ„Éº„ÇØ",
                stakeButton: "„Çπ„ÉÜ„Éº„ÇØ",
                withdrawButton: "Âºï„ÅçÂá∫„Åó",
                nodeIdPlaceholder: "„Éé„Éº„Éâ ID (1-2100)",
                amountPlaceholder: "Êï∞Èáè (ÊúÄÂ∞è 10000 NONE)",
                footer: "Shibarium Êèê‰æõ ¬© 2025",
                connectPrompt: "„Ç¶„Ç©„É¨„ÉÉ„Éà„Å´Êé•Á∂ö‰∏≠... ‚õèÔ∏è",
                connectError: "Êé•Á∂öÂ§±Êïó: ",
                joinPrompt: "10 BONE„Åß„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„Å´ÂèÇÂä†‰∏≠... üíé",
                joinError: "ÂèÇÂä†Â§±Êïó: ",
                joinSuccess: "ÂèÇÂä†ÊàêÂäüÔºÅ„Éû„Ç§„Éã„É≥„Ç∞ÈñãÂßãÔºÅüöÄ",
                nodePrompt: "1000 BONE„Åß„Éé„Éº„Éâ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„Éâ‰∏≠... ‚öôÔ∏è",
                nodeError: "„Éé„Éº„Éâ„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÂ§±Êïó: ",
                nodeSuccess: "„Éé„Éº„Éâ„Å´„Ç¢„ÉÉ„Éó„Ç∞„É¨„Éº„ÉâÔºÅ„Éû„Ç§„Éã„É≥„Ç∞„Éú„ÇπÔºÅüéâ",
                stakePrompt: "{amount} NONE„Çí„Éé„Éº„Éâ {nodeId} „Å´„Çπ„ÉÜ„Éº„ÇØ‰∏≠... ‚õèÔ∏è",
                stakeError: "„Çπ„ÉÜ„Éº„ÇØÂ§±Êïó: ",
                stakeSuccess: "{amount} NONE„Çí„Éé„Éº„Éâ {nodeId} „Å´„Çπ„ÉÜ„Éº„ÇØ„Åó„Åæ„Åó„ÅüÔºÅüí∞",
                withdrawPrompt: "„Çπ„ÉÜ„Éº„ÇØ„ÇíÂºï„ÅçÂá∫„Åó‰∏≠... üí∏",
                withdrawError: "Âºï„ÅçÂá∫„ÅóÂ§±Êïó: ",
                withdrawSuccess: "„Çπ„ÉÜ„Éº„ÇØ„ÅåÂ†±ÈÖ¨„Å®‰∏ÄÁ∑í„Å´Âºï„ÅçÂá∫„Åï„Çå„Åæ„Åó„ÅüÔºÅüéä",
                connectFirst: "„Åæ„Åö„Ç¶„Ç©„É¨„ÉÉ„Éà„ÇíÊé•Á∂ö„Åó„Å¶„Åè„Å†„Åï„ÅÑÔºÅüîß",
                nodeIdDisplay: "„ÅÇ„Å™„Åü„ÅÆ„Éé„Éº„Éâ ID: ",
                referralCount: "Á¥π‰ªã‰∫∫Êï∞: ",
                prompts: [
                    "‚õèÔ∏è „Éû„Ç§„Éä„Éº„ÄÅ„Å§„Çã„ÅØ„Åó„ÇíÊ∫ñÂÇôÔºÅNONE„ÇíÊéò„Çç„ÅÜÔºÅ",
                    "üíé NONE„ÅØË¶ã„Å§„Åã„Å£„ÅüÔºüÈ†ëÂºµ„Çå„ÄÅ„ÉÅ„É£„É≥„Éî„Ç™„É≥ÔºÅ",
                    "‚ö° „Éû„Ç§„Éã„É≥„Ç∞„É™„Ç∞„Å´ÈõªÂäõÊ≥®ÂÖ•ÔºÅNONE„ÅåÂæÖ„Å£„Å¶„ÇãÔºÅ",
                    "üöÄ NONEÈâ±Â±±„Å∏Âá∫Áô∫ÔºÅÊÄ•„ÅíÊÄ•„ÅíÔºÅ",
                    "üî• ÁÜ±„ÅÑ„ÅûÔºÅ„ÇÇ„Å£„Å®Ê∑±„ÅèÊéò„Å£„Å¶NONE„Ç≤„ÉÉ„ÉàÔºÅ",
                    "üí∞ Â§ßÂΩì„Åü„ÇäÔºÅ„ÇÇ„Å£„Å®„Çπ„ÉÜ„Éº„ÇØ„Åó„Å¶Â§ßÂãùÂà©ÔºÅ",
                    "‚õèÔ∏è „Å§„Çã„ÅØ„Åó„ÇíÊåØ„ÇåÔºÅNONE„ÅåÂëº„Çì„Åß„ÇãÔºÅ",
                    "üåü Ëºù„Åë„ÄÅ„Éû„Ç§„Éä„ÉºÔºÅNONE„ÅØÂêõ„ÅÆÂÆùÁü≥„Å†ÔºÅ",
                    "‚öôÔ∏è Ë£ÖÂÇô„ÇíÊï¥„Åà„Çà„ÅÜÔºÅNONEÈâ±Â±±„ÅåÈñã„ÅÑ„ÅüÔºÅ",
                    "üéâ Èâ±Â±±„Éë„Éº„ÉÜ„Ç£„ÉºÔºÅ‰ªä„Åô„ÅêNONE„ÇíÊéò„Çç„ÅÜÔºÅ"
                ]
            }
        };

        let currentLang = 'en';
        let promptIndex = 0;

        function updateLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            document.getElementById('title').innerText = t.title;
            document.getElementById('subtitle').innerText = t.subtitle;
            document.getElementById('connectTitle').innerText = t.connectTitle;
            document.getElementById('walletStatus').innerText = contract ? `Wallet: ${accounts[0].slice(0, 6)}...${accounts[0].slice(-4)}` : t.walletStatus;
            document.getElementById('joinTitle').innerText = t.joinTitle;
            document.getElementById('joinWithReferrerButton').innerText = t.joinButton;
            document.getElementById('referrerInput').placeholder = t.referrerPlaceholder;
            document.getElementById('nodeTitle').innerText = t.nodeTitle;
            document.getElementById('becomeNodeButton').innerText = t.nodeButton;
            document.getElementById('stakeTitle').innerText = t.stakeTitle;
            document.getElementById('stakeButton').innerText = t.stakeButton;
            document.getElementById('withdrawStakeButton').innerText = t.withdrawButton;
            document.getElementById('nodeIdInput').placeholder = t.nodeIdPlaceholder;
            document.getElementById('stakeAmountInput').placeholder = t.amountPlaceholder;
            document.getElementById('footer').innerText = t.footer;
            updatePrompt();
            updateNoneBalance();
            updateNodeSection();
            updateReferralCount();
        }

        function showModal(message) {
            document.getElementById('modalMessage').innerText = message;
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function updatePrompt() {
            const t = translations[currentLang];
            document.getElementById('minerPrompt').innerText = t.prompts[promptIndex];
            promptIndex = (promptIndex + 1) % t.prompts.length;
        }

        setInterval(updatePrompt, 3000); // ÊØè 3 ÁßíÂàáÊç¢ÊèêÁ§∫

        async function connectWallet() {
            const t = translations[currentLang];
            try {
                if (!window.ethereum) throw new Error("No MetaMask detected!");
                showModal(t.connectPrompt);
                web3 = new Web3(window.ethereum);
                accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                const chainId = await web3.eth.getChainId();
                if (chainId !== 109) {
                    try {
                        await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: "0x6d" }] });
                    } catch (e) {
                        if (e.code === 4902) await window.ethereum.request({ method: 'wallet_addEthereumChain', params: [shibariumMainnet] });
                        else throw e;
                    }
                }
                document.getElementById('walletStatus').innerText = `Wallet: ${accounts[0].slice(0, 6)}...${accounts[0].slice(-4)}`;
                contract = new web3.eth.Contract(contractABI, contractAddress);
                updateNoneBalance();
                updateNodeSection();
                updateReferralCount();
            } catch (error) {
                showModal(t.connectError + error.message);
            }
        }

        async function updateNoneBalance() {
            if (!contract) return;
            const balance = await contract.methods.balanceOf(accounts[0]).call();
            document.getElementById('noneBalance').innerText = `${web3.utils.fromWei(balance, "ether")} NONE`;
        }

        async function updateNodeSection() {
            if (!contract) return;
            const [, , isNode] = await contract.methods.getUserStatus(accounts[0]).call();
            const nodeId = await contract.methods.getUserNodeId(accounts[0]).call();
            document.getElementById('becomeNodeButton').style.display = isNode && nodeId > 0 ? 'none' : 'block';
            if (isNode && nodeId > 0) {
                document.getElementById('nodeInfo').innerText = translations[currentLang].nodeIdDisplay + nodeId;
                document.getElementById('nodeInfo').style.display = 'block';
            }
        }

        async function updateReferralCount() {
            if (!contract) return;
            const user = accounts[0];
            const referralInfo = await contract.methods.getReferralInfo(user).call();
            if (referralInfo && referralInfo[0] !== undefined) {
                document.getElementById('joinInfo').innerText = translations[currentLang].referralCount + referralInfo[0];
                document.getElementById('joinInfo').style.display = 'block';
            }
        }

        async function joinWithReferrer() {
            const t = translations[currentLang];
            if (!contract) return showModal(t.connectFirst);
            const referrer = document.getElementById("referrerInput").value;
            if (!referrer) return showModal("Referrer address is required!");
            try {
                showModal(t.joinPrompt);
                await contract.methods.joinWithReferrer(referrer).send({ from: accounts[0], value: web3.utils.toWei("10", "ether") });
                showModal(t.joinSuccess);
                updateReferralCount();
                updateNoneBalance();
                updateNodeSection();
            } catch (error) {
                showModal(t.joinError + error.message);
                document.getElementById("joinInfo").innerHTML = "Failed: " + error.message;
                document.getElementById("joinInfo").style.display = 'block';
            }
        }

        async function becomeNode() {
            const t = translations[currentLang];
            if (!contract) return showModal(t.connectFirst);
            try {
                showModal(t.nodePrompt);
                await contract.methods.becomeNode().send({ from: accounts[0], value: web3.utils.toWei("1000", "ether") });
                showModal(t.nodeSuccess);
                updateNodeSection();
                updateNoneBalance();
            } catch (error) {
                showModal(t.nodeError + error.message);
                document.getElementById("nodeInfo").innerHTML = "Failed: " + error.message;
                document.getElementById("nodeInfo").style.display = 'block';
            }
        }

        function setStakePercentage(percentage) {
            const t = translations[currentLang];
            if (!web3 || !contract || !accounts) return showModal(t.connectFirst);
            updateNoneBalance().then(() => {
                const balanceText = document.getElementById('noneBalance').innerText.split(' ')[0];
                const balance = parseFloat(balanceText);
                const minUnit = 10000;
                const maxUnits = Math.floor(balance / minUnit);
                if (maxUnits < 1) {
                    document.getElementById('stakeAmountInput').value = 0;
                } else {
                    const units = Math.floor(maxUnits * percentage / 100);
                    document.getElementById('stakeAmountInput').value = units * minUnit;
                }
            });
        }

        async function stakeToNode() {
            const t = translations[currentLang];
            if (!contract) return showModal(t.connectFirst);
            const nodeId = document.getElementById("nodeIdInput").value;
            const amount = document.getElementById("stakeAmountInput").value;
            try {
                showModal(t.stakePrompt.replace('{amount}', amount).replace('{nodeId}', nodeId));
                await contract.methods.stakeToNode(nodeId, web3.utils.toWei(amount, "ether")).send({ from: accounts[0] });
                showModal(t.stakeSuccess.replace('{amount}', amount).replace('{nodeId}', nodeId));
                document.getElementById("stakeInfo").style.display = 'block';
                updateNoneBalance();
            } catch (error) {
                showModal(t.stakeError + error.message);
                document.getElementById("stakeInfo").innerHTML = "Failed: " + error.message;
                document.getElementById("stakeInfo").style.display = 'block';
            }
        }

        async function withdrawStake() {
            const t = translations[currentLang];
            if (!contract) return showModal(t.connectFirst);
            try {
                showModal(t.withdrawPrompt);
                await contract.methods.withdrawStake().send({ from: accounts[0] });
                showModal(t.withdrawSuccess);
                document.getElementById("stakeInfo").style.display = 'block';
                updateNoneBalance();
            } catch (error) {
                showModal(t.withdrawError + error.message);
                document.getElementById("stakeInfo").innerHTML = "Failed: " + error.message;
                document.getElementById("stakeInfo").style.display = 'block';
            }
        }

        document.getElementById('connectButton').addEventListener('click', connectWallet);
        document.getElementById('joinWithReferrerButton').addEventListener('click', joinWithReferrer);
        document.getElementById('becomeNodeButton').addEventListener('click', becomeNode);
        document.getElementById('stakeButton').addEventListener('click', stakeToNode);
        document.getElementById('withdrawStakeButton').addEventListener('click', withdrawStake);
        document.getElementById('languageSwitcher').addEventListener('change', (e) => updateLanguage(e.target.value));

        window.ethereum?.on('chainChanged', connectWallet);
        window.ethereum?.on('accountsChanged', connectWallet);

        updateLanguage('en');
        updatePrompt();
    </script>
</body>
</html>
